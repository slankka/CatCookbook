(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{417:function(s,a,e){"use strict";e.r(a);var t=e(54),r=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"docker快速部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker快速部署"}},[s._v("#")]),s._v(" Docker快速部署")]),s._v(" "),e("h4",{attrs:{id:"说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[s._v("#")]),s._v(" 说明")]),s._v(" "),e("ol",[e("li",[s._v("支持本机模式快速部署。")]),s._v(" "),e("li",[s._v("docker/Dockerfile包含CAT依赖的环境，可以作为源码部署的参考。")]),s._v(" "),e("li",[s._v("默认的运行方式是集成了一个mysql镜像，可以修改为自己的mysql的详细配置。默认运行的mysql服务，将mysql数据挂载到了"),e("code",[s._v("docker/mysql/volume")]),s._v("中。")])]),s._v(" "),e("h4",{attrs:{id:"容器构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器构建"}},[s._v("#")]),s._v(" 容器构建")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" docker\ndocker-compose up\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("第一次运行以后，数据库中没有表结构，需要通过下面的命令创建表：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("container_id"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -c "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mysql -uroot -Dcat < /init.sql"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("说明："),e("code",[s._v("<container_id>")]),s._v("需要替换为容器的真实id。通过 docker ps 可以查看到mysql容器id")]),s._v(" "),e("h4",{attrs:{id:"依赖配置说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#依赖配置说明"}},[s._v("#")]),s._v(" 依赖配置说明")]),s._v(" "),e("ol",[e("li",[s._v("datasources.xml\n"),e("ul",[e("li",[s._v("CAT数据库配置，默认配置是mysql镜像，可以按需替换")])])]),s._v(" "),e("li",[s._v("docker-compose.yml\n"),e("ul",[e("li",[s._v("通过docker-compose启动的编排文件，文件中包含cat和mysql。可以屏蔽掉mysql的部分，并且修改cat的环境变量，改为真实的mysql连接信息。")])])]),s._v(" "),e("li",[s._v("client.xml\n"),e("ul",[e("li",[s._v("CAT 初始化默认的路由列表，配置此文件可以将客户端数据上报指向到不同环境。")])])]),s._v(" "),e("li",[s._v("datasources.sh\n"),e("ul",[e("li",[s._v("辅助脚本，脚本作用时修改"),e("code",[s._v("datasources.xml")]),s._v("，使用环境变量中制定的mysql连接信息。（通过sed命令替换）")])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);