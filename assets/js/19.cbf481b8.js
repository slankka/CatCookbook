(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{395:function(t,a,s){"use strict";s.r(a);var n=s(46),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("合理、灵活的监控规则可以帮助更快、更精确的发现业务线上故障。本篇主要分为五个部分：")]),t._v(" "),s("ul",[s("li",[t._v("告警规则示例")]),t._v(" "),s("li",[t._v("如何验证告警已发出")]),t._v(" "),s("li",[t._v("告警的通用配置：包括告警服务器配置、告警策略、告警接收人、默认告警接收人及告警开关、告警服务端")]),t._v(" "),s("li",[t._v("告警规则配置")]),t._v(" "),s("li",[t._v("具体的五种告警类型：包括Transaction告警、Event告警、心跳告警、异常告警、业务指标告警")])]),t._v(" "),s("h2",{attrs:{id:"告警规则示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警规则示例"}},[t._v("#")]),t._v(" 告警规则示例")]),t._v(" "),s("p",[t._v('CAT自带一个告警规则，便于对告警有一个宏观的了解。如果需要开启告警，请先参考下述"告警通用配置 - 告警服务器配置"，将服务器设置成告警服务器、发送服务器。')]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/default_transaction_rule.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"规则解释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#规则解释"}},[t._v("#")]),t._v(" 规则解释：")]),t._v(" "),s("ul",[s("li",[t._v("监控对象：cat项目下，Type为URL的Transaction，且不按照Name筛选")]),t._v(" "),s("li",[t._v("监控指标：该Transaction每分钟的执行次数")]),t._v(" "),s("li",[t._v("监控时段：监控规则检测的时段，从00:00~24:00，即每天全天监控")]),t._v(" "),s("li",[t._v("监控周期：每分钟执行一次告警监控")]),t._v(" "),s("li",[t._v("持续分钟：每次监控，检查最近几分钟的数据，这里是检查最近1分钟的数据")]),t._v(" "),s("li",[t._v("告警规则：当Transaction每分钟的执行次数大于1时，命中告警")])]),t._v(" "),s("h2",{attrs:{id:"如何验证告警已发出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何验证告警已发出"}},[t._v("#")]),t._v(" 如何验证告警已发出")]),t._v(" "),s("h3",{attrs:{id:"cat告警自身的transaction埋点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cat告警自身的transaction埋点"}},[t._v("#")]),t._v(" CAT告警自身的Transaction埋点")]),t._v(" "),s("p",[t._v("CAT已对告警规则进行埋点，请参考Transaction报表，名为AlertXXX的Transaction。")]),t._v(" "),s("p",[t._v("如果发现上述埋点，则代表告警线程已启动。")]),t._v(" "),s("h3",{attrs:{id:"cat告警自身的event埋点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cat告警自身的event埋点"}},[t._v("#")]),t._v(" CAT告警自身的Event埋点")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_transaction.png",alt:""}})]),t._v(" "),s("p",[t._v("对于告警规则执行，请参考Event报表，名为Alert:XXX的Event。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_event.png",alt:""}})]),t._v(" "),s("p",[t._v("点击Alert:Transaction这个Event，会看到以项目为粒度的Event报表。这里点击cat这一行的LogView，即可查看一个告警的具体执行情况。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_event_name.png",alt:""}})]),t._v(" "),s("p",[t._v("如果LogView最后生成了AlertEntity，代表告警规则已经触发：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_entity.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"告警发送埋点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警发送埋点"}},[t._v("#")]),t._v(" 告警发送埋点")]),t._v(" "),s("p",[t._v("如果告警线程已执行、告警规则已触发，仍未收到告警，请查看告警发送的配置是否有问题：")]),t._v(" "),s("p",[t._v("参考Problem报表，com.dianping.cat.alarm.spi.sender.AbstractSender$AlertSendException异常。该异常代表告警发送失败。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/send_error.png",alt:""}})]),t._v(" "),s("p",[t._v("点击进入LogView，可以查看到发送的URL以及参数内容，两者以"),s("code",[t._v("---")]),t._v("拼接。请对URL及参数进行排查。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/send_error_detail.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"告警通用配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警通用配置"}},[t._v("#")]),t._v(" 告警通用配置")]),t._v(" "),s("h3",{attrs:{id:"告警服务器配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警服务器配置"}},[t._v("#")]),t._v(" 告警服务器配置")]),t._v(" "),s("p",[t._v("只有配置为告警服务器的机器，才会执行告警逻辑；只有配置为发送服务器的机器，才会发送告警。")]),t._v(" "),s("p",[t._v("请参照"),s("RouterLink",{attrs:{to:"/zh/guide/ch2-config/global.html"}},[t._v("全局配置-服务端配置")]),t._v("，对告警服务器增加"),s("code",[t._v('<property name="alarm-machine" value="true"/>')]),t._v("配置、以及"),s("code",[t._v('<property name="send-machine" value="true"/>')]),t._v("配置。")],1),t._v(" "),s("h3",{attrs:{id:"告警策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警策略"}},[t._v("#")]),t._v(" 告警策略")]),t._v(" "),s("p",[t._v("告警策略：配置某种告警类型、某个项目、某个错误级别，对应的告警发送渠道，以及暂停时间。")]),t._v(" "),s("p",[t._v("举例：下述配置示例，说明对于Transaction告警，当告警项目名为demo_project：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("当告警级别为error时，发送渠道为邮件、短信、微信，连续告警之间的间隔为5分钟")])]),t._v(" "),s("li",[s("p",[t._v("当告警级别为warning时，发送渠道为邮件、微信，连续告警之间的间隔为10分钟")])])]),t._v(" "),s("h3",{attrs:{id:"配置示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置示例"}},[t._v("#")]),t._v(" 配置示例")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("alert-policy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("default"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("level")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mail,weixin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("suspendMinute")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("level")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("warning"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mail,weixin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("suspendMinute")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("group")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("demo-project"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("level")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mail,weixin,sms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("suspendMinute")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("5"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n                 "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("level")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("warning"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mail,weixin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("suspendMinute")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("10"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("alert-policy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h4",{attrs:{id:"配置说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("type：告警的类型，可选：Transaction、Event、Business、Heartbeat")]),t._v(" "),s("li",[t._v("group id属性：group可以为default，代表默认，即所有项目；也可以为项目名，代表某个项目的策略，此时default策略不会生效")]),t._v(" "),s("li",[t._v("level id属性：错误级别，分为warning代表警告、error代表错误")]),t._v(" "),s("li",[t._v("level send属性：告警渠道，分为mail-邮箱、weixin-微信、sms-短信")]),t._v(" "),s("li",[t._v("level suspendMinute属性：连续告警的暂停时间")])]),t._v(" "),s("h3",{attrs:{id:"告警接收人"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警接收人"}},[t._v("#")]),t._v(" 告警接收人")]),t._v(" "),s("p",[t._v("告警接收人，为告警所属项目的联系人：")]),t._v(" "),s("ul",[s("li",[t._v("项目组邮件：项目负责人邮件，或项目组产品线邮件，多个邮箱由英文逗号分割，不要留有空格；作为发送告警邮件、微信的依据")]),t._v(" "),s("li",[t._v("项目组号码：项目负责人手机号；多个号码由英文逗号分隔，不要留有空格；作为发送告警短信的依据")])]),t._v(" "),s("p",[t._v("具体项目联系人配置，请参考"),s("RouterLink",{attrs:{to:"/zh/guide/config/project.html"}},[t._v("项目配置")]),t._v("章节。")],1),t._v(" "),s("h3",{attrs:{id:"默认告警接收人及告警开关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认告警接收人及告警开关"}},[t._v("#")]),t._v(" 默认告警接收人及告警开关")]),t._v(" "),s("p",[t._v("某个告警类型的告警信息（比如Transaction告警），均会发给默认告警接收人。默认告警人多用于测试。")]),t._v(" "),s("p",[t._v("默认告警人的第二个功能是可以直接关闭某种类型的告警。比如"),s("code",[t._v('<receiver id="Transaction" enable="false">')]),t._v("，代表不发送Transaction告警。")]),t._v(" "),s("h4",{attrs:{id:"配置示例-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置示例-2"}},[t._v("#")]),t._v(" 配置示例")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("alert-config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("receiver")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Transaction"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("enable")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("email")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("testUser1@test.com"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("email")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("phone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("12345678901"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("phone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("phone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("12345678902"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("phone")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("receiver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("alert-config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h5",{attrs:{id:"配置说明-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-2"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("receiver id属性：告警的类型，可选：Transaction、Event、Business、Heartbeat")]),t._v(" "),s("li",[t._v("receiver enable属性：是否开启告警；如果为false，此类别的告警不会发出")]),t._v(" "),s("li",[t._v("email：默认邮件告警人")]),t._v(" "),s("li",[t._v("phone：默认短信告警人")])]),t._v(" "),s("h3",{attrs:{id:"告警服务端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警服务端"}},[t._v("#")]),t._v(" 告警服务端")]),t._v(" "),s("p",[t._v("告警发送中心的配置。（什么是告警发送中心：提供发送短信、邮件、微信功能，且提供Http API的服务）")]),t._v(" "),s("p",[t._v("CAT在生成告警后，调用告警发送中心的Http接口发送告警。CAT自身并不集成告警发送中心，请自己搭建告警发送中心。")]),t._v(" "),s("h4",{attrs:{id:"配置示例-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置示例-3"}},[t._v("#")]),t._v(" 配置示例")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sender-config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sender")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mail"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://test/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("post"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("successCode")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("200"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("batchSend")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("type=1500"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("key=title,body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("re=test@test.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("to=${receiver}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("value=${title},${content}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sender")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sender")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("weixin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://test/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("post"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("successCode")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("success"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("batchSend")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("domain=${domain}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("email=${receiver}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("title=${title}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content=${content}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("type=${type}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sender")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("sender")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("url")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://test/"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("post"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("successCode")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("200"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("batchSend")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("par")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jsonm={type:808,mobile:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("${receiver}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(",pair:{body="),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("${content}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sender")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("sender-config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("h4",{attrs:{id:"配置说明-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-3"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("sender id属性：告警的类型，可选：mail、sms、weixin")]),t._v(" "),s("li",[t._v("sender url属性：告警中心的URL")]),t._v(" "),s("li",[t._v("sender batchSend属性：是否支持批量发送告警信息")]),t._v(" "),s("li",[t._v("par：告警中心所需的Http参数。${argument}代表构建告警对象时，附带的动态参数；此处需要根据告警发送中心的需求，将动态参数加入到代码AlertEntity中的m_paras")])]),t._v(" "),s("h4",{attrs:{id:"定制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#定制"}},[t._v("#")]),t._v(" 定制：")]),t._v(" "),s("p",[t._v("由于CAT自身并不集成告警中心，需要用户自己搭建告警中心。告警中心的接口不同，为此需要对代码进行一定的修改。主要修改三处：")]),t._v(" "),s("ul",[s("li",[t._v("上述的告警服务端配置：主要配置每个告警渠道的url规则、参数列表、参数占位符、返回码验证")]),t._v(" "),s("li",[t._v("MailSender, SmsSender, WeixinSender：配置告警标题、内容的生成逻辑")]),t._v(" "),s("li",[t._v("AlertEntity：配置所需的参数")])]),t._v(" "),s("h2",{attrs:{id:"告警规则"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警规则"}},[t._v("#")]),t._v(" 告警规则")]),t._v(" "),s("p",[t._v("目前CAT的监控规则有五个要素，请按照以下五点要素制定规则：")]),t._v(" "),s("ul",[s("li",[t._v("告警时间段。同一项业务指标在每天不同的时段可能有不同的趋势。设定该项，可让CAT在每天不同的时间段执行不同的监控规则。注意：告警时间段，不是监控数据的时间段，只是告警从这一刻开始进行检查数据")]),t._v(" "),s("li",[t._v("规则组合。在一个时间段中，可能指标触发了多个监控规则中的一个规则就要发出警报，也有可能指标要同时触发了多个监控规则才需要发出警报。这种关系好比电路图中的并联和串联。规则的组合合理有助于提高监控的准确度")]),t._v(" "),s("li",[t._v("监控规则类型。通过以下六种类型对指标进行监控：最大值、最小值、波动上升百分比、波动下降百分比、总和最大值、总和最小值")]),t._v(" "),s("li",[t._v("监控最近分钟数。设定时间后（单位为分钟），当指标在设定的最近的时间长度内连续触发了监控规则，才会发出警报。比如最近分钟数为3，表明连续三分钟的数组都满足条件才告警。如果分钟数为1，表示最近的一分钟满足条件就告警")]),t._v(" "),s("li",[t._v("规则与被监控指标的匹配。监控规则可以按照名称、正则表达式与监控的对象（指标）进行匹配")]),t._v(" "),s("li",[t._v("监控规则模型如下图所示：\n"),s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/rule.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"告警时间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#告警时间"}},[t._v("#")]),t._v(" 告警时间")]),t._v(" "),s("ol",[s("li",[t._v("告警时间段，08:00 - 20:00，是指告警从08:00开始进行数据检查，直到20:00")]),t._v(" "),s("li",[t._v("检查的数据是根据告警时间段和下面设置的“监控最近分钟数”来决定的")]),t._v(" "),s("li",[t._v("如果只想进行边界告警（即只判断最近的变化情况），而不是水平告警（不关心最近的几分钟时间区间内的变化趋势），可以直接设置“监控最近分钟数”为1，即为判断最后一分钟数据的情况")]),t._v(" "),s("li",[t._v("如果对告警时间精度要求较高的业务方，可以参考进行斟酌")])]),t._v(" "),s("h3",{attrs:{id:"监控条件与子条件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监控条件与子条件"}},[t._v("#")]),t._v(" 监控条件与子条件：")]),t._v(" "),s("p",[t._v("一个告警规则由多个监控条件组成。一个规则下的多个监控条件为并联关系，当一个监控条件被触发，整个规则就被触发。")]),t._v(" "),s("p",[t._v("监控条件中的持续分钟数表示该条件的持续时间。设定时间单位为分钟。当指标在设定的时间长度内连续触发了该条规则，才会触发该监控条件。")]),t._v(" "),s("p",[t._v("监控条件由子条件组成。一个condition下的多个子条件为串联关系，只有当一个监控条件下的全部子条件被触发，该监控条件才被触发。")]),t._v(" "),s("h4",{attrs:{id:"子条件类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#子条件类型"}},[t._v("#")]),t._v(" 子条件类型：")]),t._v(" "),s("p",[t._v("有六种类型。子条件的内容为对应的阈值，请注意阈值只能由数字组成，当阈值表达百分比时，不能在最后加上百分号。八种类型如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("MaxVal\t最大值（当前值）")]),t._v(" "),s("td",[t._v("当前实际值 最大值，比如检查最近3分钟数据，3分钟数据会有3个value，是表示"),s("font",{attrs:{color:"#FF4500"}},[t._v("（>=N）")]),t._v("个值都必须同时"),s("font",{attrs:{color:"#FF4500"}},[t._v(">=")]),t._v("设定值")],1)]),t._v(" "),s("tr",[s("td",[t._v("MinVal\t最小值（当前值）")]),t._v(" "),s("td",[t._v("当前实际值 最小值，比如检查最近3分钟数据，3分钟数据会有3个value，是表示"),s("font",{attrs:{color:"#FF4500"}},[t._v("（>=N）")]),t._v("个值都必须同时比"),s("font",{attrs:{color:"#FF4500"}},[t._v("<=")]),t._v("设定值")],1)]),t._v(" "),s("tr",[s("td",[t._v("FluAscPer 波动上升百分比（当前值）")]),t._v(" "),s("td",[t._v("波动百分比最大值。即当前最后"),s("font",{attrs:{color:"#FF4500"}},[t._v("（N）")]),t._v("分钟值比监控周期内其它分钟值"),s("font",{attrs:{color:"#FF4500"}},[t._v("（M-N个）")]),t._v("的增加百分比都>=设定的百分比时触发警报,比如检查最近10分钟数据，触发个数为3；10分钟内数据会算出7个百分比数据，是表示最后3分钟值分别相比前面7分钟值，3组7次比较的上升波动百分比"),s("font",{attrs:{color:"#FF4500"}},[t._v("全部>=")]),t._v("配置阈值。比如下降50%，阈值填写50。")],1)]),t._v(" "),s("tr",[s("td",[t._v("FluDescPer 波动下降百分比（当前值）")]),t._v(" "),s("td",[t._v("波动百分比最小值。当前最后"),s("font",{attrs:{color:"#FF4500"}},[t._v("（N）")]),t._v("分钟值比监控周期内其它"),s("font",{attrs:{color:"#FF4500"}},[t._v("（M-N个）")]),t._v("分钟值的减少百分比都大于设定的百分比时触发警报，比如检查最近10分钟数据，触发个数为3；10分钟数据会算出7个百分比数据，是表示最后3分钟值分别相比前面7分钟值，3组7次比较的下降波动百分比"),s("font",{attrs:{color:"#FF4500"}},[t._v("全部>=")]),t._v("配置阈值。比如下降50%，阈值填写50。")],1)]),t._v(" "),s("tr",[s("td",[t._v("SumMaxVal 总和最大值（当前值）")]),t._v(" "),s("td",[t._v("当前值总和最大值，比如检查最近3分钟数据，表示3分钟内的总和"),s("font",{attrs:{color:"#FF4500"}},[t._v(">=")]),t._v("设定值就告警。")],1)]),t._v(" "),s("tr",[s("td",[t._v("SumMinVal 总和最小值（当前值）")]),t._v(" "),s("td",[t._v("当前值总和最小值，比如检查最近3分钟数据，表示3分钟内的总和"),s("font",{attrs:{color:"#FF4500"}},[t._v("<=")]),t._v("设定值就告警。")],1)])])]),t._v(" "),s("p",[t._v('点击"如何使用?"按钮，将会出现信息介绍设置规则的流程')]),t._v(" "),s("h2",{attrs:{id:"具体告警配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#具体告警配置"}},[t._v("#")]),t._v(" 具体告警配置")]),t._v(" "),s("h3",{attrs:{id:"transaction告警"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transaction告警"}},[t._v("#")]),t._v(" Transaction告警")]),t._v(" "),s("p",[t._v("对Transaction的告警，支持的指标有次数、延时、失败率；监控周期：一分钟")]),t._v(" "),s("h4",{attrs:{id:"配置图示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置图示"}},[t._v("#")]),t._v(" 配置图示")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/transaction_alert.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"配置说明-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-4"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("项目名：要监控的项目名")]),t._v(" "),s("li",[t._v("type：被监控transaction的type")]),t._v(" "),s("li",[t._v("name：被监控transaction的name；如果为All，代表全部name")]),t._v(" "),s("li",[t._v("监控指标：次数、延时、失败率")]),t._v(" "),s("li",[t._v("告警规则：详情见"),s("strong",[t._v("告警规则")]),t._v("部分")])]),t._v(" "),s("h3",{attrs:{id:"event告警"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#event告警"}},[t._v("#")]),t._v(" Event告警")]),t._v(" "),s("p",[t._v("对Event的个数进行告警；监控周期：一分钟")]),t._v(" "),s("h4",{attrs:{id:"配置图示-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置图示-2"}},[t._v("#")]),t._v(" 配置图示")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/event_alert.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"配置说明-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-5"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("项目名：要监控的项目名")]),t._v(" "),s("li",[t._v("type：被监控event的type")]),t._v(" "),s("li",[t._v("name：被监控event的name；如果为All，代表全部name")]),t._v(" "),s("li",[t._v("告警规则：详情见"),s("strong",[t._v("告警规则")]),t._v("部分")])]),t._v(" "),s("h3",{attrs:{id:"心跳告警"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#心跳告警"}},[t._v("#")]),t._v(" 心跳告警")]),t._v(" "),s("p",[t._v("心跳告警是对服务器当前状态的监控，如监控系统负载、GC数量等信息；监控周期：一分钟")]),t._v(" "),s("h4",{attrs:{id:"配置图示-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置图示-3"}},[t._v("#")]),t._v(" 配置图示")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/heartbeat_alert.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"配置说明-6"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-6"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("项目名：要监控的项目名")]),t._v(" "),s("li",[t._v("指标：被监控的心跳指标名称；心跳告警是由两级匹配的：首先匹配项目，然后按照指标匹配")]),t._v(" "),s("li",[t._v("告警规则：详情见"),s("strong",[t._v("告警规则")]),t._v("部分")])]),t._v(" "),s("h4",{attrs:{id:"异常告警"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常告警"}},[t._v("#")]),t._v(" 异常告警")]),t._v(" "),s("p",[t._v("对异常的个数进行告警；监控周期：一分钟")]),t._v(" "),s("h4",{attrs:{id:"配置图示-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置图示-4"}},[t._v("#")]),t._v(" 配置图示")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/problem_alert.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"配置说明-7"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-7"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("项目名：要监控的项目名")]),t._v(" "),s("li",[t._v("异常名称：被监控异常名称；当设置为“Total”时，是针对当前项目组所有异常总数阈值进行设置；当设置为特定异常名称时，针对当前项目组所有同名的异常阈值进行设定")]),t._v(" "),s("li",[t._v("warning阈值：到达该阈值，发送warning级别告警；当异常数小于该阈值时，不做任何警报")]),t._v(" "),s("li",[t._v("error阈值：到达该阈值，发送error级别告警")]),t._v(" "),s("li",[t._v("总数大于Warning阈值，小于Error阈值，进行Warning级别告警；大于Error阈值，进行Error级别告警")])]),t._v(" "),s("h3",{attrs:{id:"异常过滤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异常过滤"}},[t._v("#")]),t._v(" 异常过滤：")]),t._v(" "),s("p",[t._v("对于不想进行异常告警的异常，可以在异常过滤配置里进行设置。")]),t._v(" "),s("ul",[s("li",[t._v("域名：\t项目组名称，当设置为“Default”时，适用于所有项目组。")]),t._v(" "),s("li",[t._v("异常名称：\t异常名称，当设置为特定异常名称时，过滤当前项目组所有同名的异常")])]),t._v(" "),s("h3",{attrs:{id:"业务指标告警"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#业务指标告警"}},[t._v("#")]),t._v(" 业务指标告警")]),t._v(" "),s("p",[t._v("对Business业务指标进行告警；监控周期：一分钟")]),t._v(" "),s("h4",{attrs:{id:"入口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入口"}},[t._v("#")]),t._v(" 入口")]),t._v(" "),s("p",[t._v('项目监控配置 -> 输入项目名并搜索 -> 具体指标列的"告警"按钮')]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/business_alarm_list.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"配置图示-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置图示-5"}},[t._v("#")]),t._v(" 配置图示")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/business_alarm_edit.png",alt:""}})]),t._v(" "),s("h4",{attrs:{id:"配置说明-8"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置说明-8"}},[t._v("#")]),t._v(" 配置说明：")]),t._v(" "),s("ul",[s("li",[t._v("项目名：不需配置项目名，已从项目业务指标列表页面跳转，附带项目名信息")]),t._v(" "),s("li",[t._v("监控指标：支持对指标的count、sum、avg三种统计值进行告警")]),t._v(" "),s("li",[t._v("告警规则：详情见"),s("strong",[t._v("告警规则")]),t._v("部分")])]),t._v(" "),s("h3",{attrs:{id:"基线告警"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基线告警"}},[t._v("#")]),t._v(" 基线告警：")]),t._v(" "),s("p",[t._v("告警规则有四种基线告警类型：")]),t._v(" "),s("ul",[s("li",[t._v("下降值(比基线)")]),t._v(" "),s("li",[t._v("下降百分比(比基线)")]),t._v(" "),s("li",[t._v("上升值(比基线)")]),t._v(" "),s("li",[t._v("上升百分比(比基线)")])]),t._v(" "),s("p",[t._v("基线是由最近四周、相同周几的数据加权求和平均计算得出，可以反应历史情况。")]),t._v(" "),s("p",[t._v("配置基线告警之后，Business报表才会展示基线趋势图。")]),t._v(" "),s("p",[t._v("基线相关配置，请参考："),s("RouterLink",{attrs:{to:"/zh/guide/config/business.html"}},[t._v("业务指标配置")])],1)])}),[],!1,null,null,null);a.default=r.exports}}]);