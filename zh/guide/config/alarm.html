<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>告警配置 | Cat Cookbook</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/CatCookbook/assets/css/0.styles.d177c790.css" as="style"><link rel="preload" href="/CatCookbook/assets/js/app.7834a841.js" as="script"><link rel="preload" href="/CatCookbook/assets/js/3.c2b5e94d.js" as="script"><link rel="preload" href="/CatCookbook/assets/js/2.3be89db0.js" as="script"><link rel="preload" href="/CatCookbook/assets/js/19.4c7d11c5.js" as="script"><link rel="prefetch" href="/CatCookbook/assets/js/10.22a42915.js"><link rel="prefetch" href="/CatCookbook/assets/js/11.e86f0a24.js"><link rel="prefetch" href="/CatCookbook/assets/js/12.5193a10a.js"><link rel="prefetch" href="/CatCookbook/assets/js/13.ca90230e.js"><link rel="prefetch" href="/CatCookbook/assets/js/14.a3acbab6.js"><link rel="prefetch" href="/CatCookbook/assets/js/15.34e974ac.js"><link rel="prefetch" href="/CatCookbook/assets/js/16.c0254d91.js"><link rel="prefetch" href="/CatCookbook/assets/js/17.4621d489.js"><link rel="prefetch" href="/CatCookbook/assets/js/18.2d43a817.js"><link rel="prefetch" href="/CatCookbook/assets/js/20.0bc8cb9b.js"><link rel="prefetch" href="/CatCookbook/assets/js/21.8399346e.js"><link rel="prefetch" href="/CatCookbook/assets/js/22.bd944445.js"><link rel="prefetch" href="/CatCookbook/assets/js/23.510c8e59.js"><link rel="prefetch" href="/CatCookbook/assets/js/24.9981b3b9.js"><link rel="prefetch" href="/CatCookbook/assets/js/25.bc88b092.js"><link rel="prefetch" href="/CatCookbook/assets/js/26.5915a896.js"><link rel="prefetch" href="/CatCookbook/assets/js/27.c22d0ff0.js"><link rel="prefetch" href="/CatCookbook/assets/js/28.b316b502.js"><link rel="prefetch" href="/CatCookbook/assets/js/29.3a46956e.js"><link rel="prefetch" href="/CatCookbook/assets/js/30.c5f0c43f.js"><link rel="prefetch" href="/CatCookbook/assets/js/4.c3e0a58f.js"><link rel="prefetch" href="/CatCookbook/assets/js/5.6a73b7f6.js"><link rel="prefetch" href="/CatCookbook/assets/js/6.d62e2ab9.js"><link rel="prefetch" href="/CatCookbook/assets/js/7.5b3fbab4.js"><link rel="prefetch" href="/CatCookbook/assets/js/8.ae6b90b0.js"><link rel="prefetch" href="/CatCookbook/assets/js/9.5f3ba47f.js">
    <link rel="stylesheet" href="/CatCookbook/assets/css/0.styles.d177c790.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-09d3003c><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/CatCookbook/" class="home-link router-link-active"><!----> <span class="site-name">Cat Cookbook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Slankka的指南" class="dropdown-title"><span class="title">Slankka Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Slankka的指南" class="mobile-dropdown-title"><span class="title">Slankka Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/slankka/CatCookbook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://slankka.github.io/CatCookbook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dianping Cat Cookbook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/slankka/CatCookbook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Slankka的指南" class="dropdown-title"><span class="title">Slankka Guides</span> <span class="arrow down"></span></button> <button type="button" aria-label="Slankka的指南" class="mobile-dropdown-title"><span class="title">Slankka Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/slankka/CatCookbook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://slankka.github.io/CatCookbook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dianping Cat Cookbook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/slankka/CatCookbook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CatCookbook/zh/guide/" aria-current="page" class="sidebar-link">概述</a></li><li><a href="/CatCookbook/zh/guide/recent-update.html" class="sidebar-link">最新特性一览</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CatCookbook/zh/guide/install/installation.html" class="sidebar-link">服务端部署</a></li><li><a href="/CatCookbook/zh/guide/install/docker.html" class="sidebar-link">容器化部署</a></li><li><a href="/CatCookbook/zh/guide/install/storage.html" class="sidebar-link">日志持久化</a></li><li><a href="/CatCookbook/zh/guide/install/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CatCookbook/zh/guide/development-ide.html" class="sidebar-link">IDE 配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/CatCookbook/zh/guide/Configuration" class="sidebar-heading clickable open"><span>Configuration</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/CatCookbook/zh/guide/config/project.html" class="sidebar-link">项目配置</a></li><li><a href="/CatCookbook/zh/guide/config/alarm.html" aria-current="page" class="active sidebar-link">告警配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/CatCookbook/zh/guide/config/alarm.html#告警规则示例" class="sidebar-link">告警规则示例</a></li><li class="sidebar-sub-header"><a href="/CatCookbook/zh/guide/config/alarm.html#如何验证告警已发出" class="sidebar-link">如何验证告警已发出</a></li><li class="sidebar-sub-header"><a href="/CatCookbook/zh/guide/config/alarm.html#告警通用配置" class="sidebar-link">告警通用配置</a></li><li class="sidebar-sub-header"><a href="/CatCookbook/zh/guide/config/alarm.html#告警规则" class="sidebar-link">告警规则</a></li><li class="sidebar-sub-header"><a href="/CatCookbook/zh/guide/config/alarm.html#具体告警配置" class="sidebar-link">具体告警配置</a></li></ul></li><li><a href="/CatCookbook/zh/guide/config/global.html" class="sidebar-link">全局系统配置</a></li><li><a href="/CatCookbook/zh/guide/config/router.html" class="sidebar-link">路由配置</a></li><li><a href="/CatCookbook/zh/guide/config/business.html" class="sidebar-link">业务指标配置</a></li><li><a href="/CatCookbook/zh/guide/config/heartbeat.html" class="sidebar-link">心跳报表配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Client</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/CatCookbook/zh/guide/client/java.html" class="sidebar-link">Cat Client for Java</a></li><li><a href="/CatCookbook/zh/guide/client/python.html" class="sidebar-link">Cat Client for Python</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CatCookbook/zh/guide/client/c" class="sidebar-heading clickable"><span>Cat Client for C</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/CatCookbook/zh/guide/client/c++" class="sidebar-heading clickable"><span>Cat Client for C++</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/CatCookbook/zh/guide/client/go.html" class="sidebar-link">Cat Client for Go</a></li><li><a href="/CatCookbook/zh/guide/client/node.js.html" class="sidebar-link">Cat Client for Node.js</a></li><li><a href="https://github.com/ctripcorp/cat.net" target="_blank" rel="noopener noreferrer" class="sidebar-link">Cat Client for .Net<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>合理、灵活的监控规则可以帮助更快、更精确的发现业务线上故障。本篇主要分为五个部分：</p> <ul><li>告警规则示例</li> <li>如何验证告警已发出</li> <li>告警的通用配置：包括告警服务器配置、告警策略、告警接收人、默认告警接收人及告警开关、告警服务端</li> <li>告警规则配置</li> <li>具体的五种告警类型：包括Transaction告警、Event告警、心跳告警、异常告警、业务指标告警</li></ul> <h2 id="告警规则示例"><a href="#告警规则示例" class="header-anchor">#</a> 告警规则示例</h2> <p>CAT自带一个告警规则，便于对告警有一个宏观的了解。如果需要开启告警，请先参考下述&quot;告警通用配置 - 告警服务器配置&quot;，将服务器设置成告警服务器、发送服务器。</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/default_transaction_rule.png" alt=""></p> <h3 id="规则解释"><a href="#规则解释" class="header-anchor">#</a> 规则解释：</h3> <ul><li>监控对象：cat项目下，Type为URL的Transaction，且不按照Name筛选</li> <li>监控指标：该Transaction每分钟的执行次数</li> <li>监控时段：监控规则检测的时段，从00:00~24:00，即每天全天监控</li> <li>监控周期：每分钟执行一次告警监控</li> <li>持续分钟：每次监控，检查最近几分钟的数据，这里是检查最近1分钟的数据</li> <li>告警规则：当Transaction每分钟的执行次数大于1时，命中告警</li></ul> <h2 id="如何验证告警已发出"><a href="#如何验证告警已发出" class="header-anchor">#</a> 如何验证告警已发出</h2> <h3 id="cat告警自身的transaction埋点"><a href="#cat告警自身的transaction埋点" class="header-anchor">#</a> CAT告警自身的Transaction埋点</h3> <p>CAT已对告警规则进行埋点，请参考Transaction报表，名为AlertXXX的Transaction。</p> <p>如果发现上述埋点，则代表告警线程已启动。</p> <h3 id="cat告警自身的event埋点"><a href="#cat告警自身的event埋点" class="header-anchor">#</a> CAT告警自身的Event埋点</h3> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_transaction.png" alt=""></p> <p>对于告警规则执行，请参考Event报表，名为Alert:XXX的Event。</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_event.png" alt=""></p> <p>点击Alert:Transaction这个Event，会看到以项目为粒度的Event报表。这里点击cat这一行的LogView，即可查看一个告警的具体执行情况。</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_event_name.png" alt=""></p> <p>如果LogView最后生成了AlertEntity，代表告警规则已经触发：</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/alert_entity.png" alt=""></p> <h3 id="告警发送埋点"><a href="#告警发送埋点" class="header-anchor">#</a> 告警发送埋点</h3> <p>如果告警线程已执行、告警规则已触发，仍未收到告警，请查看告警发送的配置是否有问题：</p> <p>参考Problem报表，com.dianping.cat.alarm.spi.sender.AbstractSender$AlertSendException异常。该异常代表告警发送失败。</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/send_error.png" alt=""></p> <p>点击进入LogView，可以查看到发送的URL以及参数内容，两者以<code>---</code>拼接。请对URL及参数进行排查。</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/send_error_detail.png" alt=""></p> <h2 id="告警通用配置"><a href="#告警通用配置" class="header-anchor">#</a> 告警通用配置</h2> <h3 id="告警服务器配置"><a href="#告警服务器配置" class="header-anchor">#</a> 告警服务器配置</h3> <p>只有配置为告警服务器的机器，才会执行告警逻辑；只有配置为发送服务器的机器，才会发送告警。</p> <p>请参照<a href="/CatCookbook/zh/guide/ch2-config/global.html">全局配置-服务端配置</a>，对告警服务器增加<code>&lt;property name=&quot;alarm-machine&quot; value=&quot;true&quot;/&gt;</code>配置、以及<code>&lt;property name=&quot;send-machine&quot; value=&quot;true&quot;/&gt;</code>配置。</p> <h3 id="告警策略"><a href="#告警策略" class="header-anchor">#</a> 告警策略</h3> <p>告警策略：配置某种告警类型、某个项目、某个错误级别，对应的告警发送渠道，以及暂停时间。</p> <p>举例：下述配置示例，说明对于Transaction告警，当告警项目名为demo_project：</p> <ul><li><p>当告警级别为error时，发送渠道为邮件、短信、微信，连续告警之间的间隔为5分钟</p></li> <li><p>当告警级别为warning时，发送渠道为邮件、微信，连续告警之间的间隔为10分钟</p></li></ul> <h3 id="配置示例"><a href="#配置示例" class="header-anchor">#</a> 配置示例</h3> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-policy</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Transaction<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">send</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mail,weixin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suspendMinute</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">send</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mail,weixin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suspendMinute</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>group</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>group</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo-project<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error<span class="token punctuation">&quot;</span></span> <span class="token attr-name">send</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mail,weixin,sms<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suspendMinute</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>level</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warning<span class="token punctuation">&quot;</span></span> <span class="token attr-name">send</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mail,weixin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">suspendMinute</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>group</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>alert-policy</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="配置说明"><a href="#配置说明" class="header-anchor">#</a> 配置说明：</h4> <ul><li>type：告警的类型，可选：Transaction、Event、Business、Heartbeat</li> <li>group id属性：group可以为default，代表默认，即所有项目；也可以为项目名，代表某个项目的策略，此时default策略不会生效</li> <li>level id属性：错误级别，分为warning代表警告、error代表错误</li> <li>level send属性：告警渠道，分为mail-邮箱、weixin-微信、sms-短信</li> <li>level suspendMinute属性：连续告警的暂停时间</li></ul> <h3 id="告警接收人"><a href="#告警接收人" class="header-anchor">#</a> 告警接收人</h3> <p>告警接收人，为告警所属项目的联系人：</p> <ul><li>项目组邮件：项目负责人邮件，或项目组产品线邮件，多个邮箱由英文逗号分割，不要留有空格；作为发送告警邮件、微信的依据</li> <li>项目组号码：项目负责人手机号；多个号码由英文逗号分隔，不要留有空格；作为发送告警短信的依据</li></ul> <p>具体项目联系人配置，请参考<a href="/CatCookbook/zh/guide/config/project.html">项目配置</a>章节。</p> <h3 id="默认告警接收人及告警开关"><a href="#默认告警接收人及告警开关" class="header-anchor">#</a> 默认告警接收人及告警开关</h3> <p>某个告警类型的告警信息（比如Transaction告警），均会发给默认告警接收人。默认告警人多用于测试。</p> <p>默认告警人的第二个功能是可以直接关闭某种类型的告警。比如<code>&lt;receiver id=&quot;Transaction&quot; enable=&quot;false&quot;&gt;</code>，代表不发送Transaction告警。</p> <h4 id="配置示例-2"><a href="#配置示例-2" class="header-anchor">#</a> 配置示例</h4> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>alert-config</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>receiver</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Transaction<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>email</span><span class="token punctuation">&gt;</span></span>testUser1@test.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>email</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phone</span><span class="token punctuation">&gt;</span></span>12345678901<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phone</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phone</span><span class="token punctuation">&gt;</span></span>12345678902<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phone</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>receiver</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>alert-config</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="配置说明-2"><a href="#配置说明-2" class="header-anchor">#</a> 配置说明：</h5> <ul><li>receiver id属性：告警的类型，可选：Transaction、Event、Business、Heartbeat</li> <li>receiver enable属性：是否开启告警；如果为false，此类别的告警不会发出</li> <li>email：默认邮件告警人</li> <li>phone：默认短信告警人</li></ul> <h3 id="告警服务端"><a href="#告警服务端" class="header-anchor">#</a> 告警服务端</h3> <p>告警发送中心的配置。（什么是告警发送中心：提供发送短信、邮件、微信功能，且提供Http API的服务）</p> <p>CAT在生成告警后，调用告警发送中心的Http接口发送告警。CAT自身并不集成告警发送中心，请自己搭建告警发送中心。</p> <h4 id="配置示例-3"><a href="#配置示例-3" class="header-anchor">#</a> 配置示例</h4> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sender-config</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sender</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mail<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://test/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">successCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">batchSend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type=1500<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>key=title,body<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>re=test@test.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>to=${receiver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value=${title},${content}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sender</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sender</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weixin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://test/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">successCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>success<span class="token punctuation">&quot;</span></span> <span class="token attr-name">batchSend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain=${domain}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email=${receiver}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title=${title}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content=${content}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>type=${type}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sender</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sender</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sms<span class="token punctuation">&quot;</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://test/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">successCode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">batchSend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>par</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jsonm={type:808,mobile:<span class="token punctuation">'</span>${receiver}<span class="token punctuation">'</span>,pair:{body=<span class="token punctuation">'</span>${content}<span class="token punctuation">'</span>}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sender</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sender-config</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h4 id="配置说明-3"><a href="#配置说明-3" class="header-anchor">#</a> 配置说明：</h4> <ul><li>sender id属性：告警的类型，可选：mail、sms、weixin</li> <li>sender url属性：告警中心的URL</li> <li>sender batchSend属性：是否支持批量发送告警信息</li> <li>par：告警中心所需的Http参数。${argument}代表构建告警对象时，附带的动态参数；此处需要根据告警发送中心的需求，将动态参数加入到代码AlertEntity中的m_paras</li></ul> <h4 id="定制"><a href="#定制" class="header-anchor">#</a> 定制：</h4> <p>由于CAT自身并不集成告警中心，需要用户自己搭建告警中心。告警中心的接口不同，为此需要对代码进行一定的修改。主要修改三处：</p> <ul><li>上述的告警服务端配置：主要配置每个告警渠道的url规则、参数列表、参数占位符、返回码验证</li> <li>MailSender, SmsSender, WeixinSender：配置告警标题、内容的生成逻辑</li> <li>AlertEntity：配置所需的参数</li></ul> <h2 id="告警规则"><a href="#告警规则" class="header-anchor">#</a> 告警规则</h2> <p>目前CAT的监控规则有五个要素，请按照以下五点要素制定规则：</p> <ul><li>告警时间段。同一项业务指标在每天不同的时段可能有不同的趋势。设定该项，可让CAT在每天不同的时间段执行不同的监控规则。注意：告警时间段，不是监控数据的时间段，只是告警从这一刻开始进行检查数据</li> <li>规则组合。在一个时间段中，可能指标触发了多个监控规则中的一个规则就要发出警报，也有可能指标要同时触发了多个监控规则才需要发出警报。这种关系好比电路图中的并联和串联。规则的组合合理有助于提高监控的准确度</li> <li>监控规则类型。通过以下六种类型对指标进行监控：最大值、最小值、波动上升百分比、波动下降百分比、总和最大值、总和最小值</li> <li>监控最近分钟数。设定时间后（单位为分钟），当指标在设定的最近的时间长度内连续触发了监控规则，才会发出警报。比如最近分钟数为3，表明连续三分钟的数组都满足条件才告警。如果分钟数为1，表示最近的一分钟满足条件就告警</li> <li>规则与被监控指标的匹配。监控规则可以按照名称、正则表达式与监控的对象（指标）进行匹配</li> <li>监控规则模型如下图所示：
<img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/rule.png" alt=""></li></ul> <h3 id="告警时间"><a href="#告警时间" class="header-anchor">#</a> 告警时间</h3> <ol><li>告警时间段，08:00 - 20:00，是指告警从08:00开始进行数据检查，直到20:00</li> <li>检查的数据是根据告警时间段和下面设置的“监控最近分钟数”来决定的</li> <li>如果只想进行边界告警（即只判断最近的变化情况），而不是水平告警（不关心最近的几分钟时间区间内的变化趋势），可以直接设置“监控最近分钟数”为1，即为判断最后一分钟数据的情况</li> <li>如果对告警时间精度要求较高的业务方，可以参考进行斟酌</li></ol> <h3 id="监控条件与子条件"><a href="#监控条件与子条件" class="header-anchor">#</a> 监控条件与子条件：</h3> <p>一个告警规则由多个监控条件组成。一个规则下的多个监控条件为并联关系，当一个监控条件被触发，整个规则就被触发。</p> <p>监控条件中的持续分钟数表示该条件的持续时间。设定时间单位为分钟。当指标在设定的时间长度内连续触发了该条规则，才会触发该监控条件。</p> <p>监控条件由子条件组成。一个condition下的多个子条件为串联关系，只有当一个监控条件下的全部子条件被触发，该监控条件才被触发。</p> <h4 id="子条件类型"><a href="#子条件类型" class="header-anchor">#</a> 子条件类型：</h4> <p>有六种类型。子条件的内容为对应的阈值，请注意阈值只能由数字组成，当阈值表达百分比时，不能在最后加上百分号。八种类型如下：</p> <table><thead><tr><th>类型</th> <th>说明</th></tr></thead> <tbody><tr><td>MaxVal	最大值（当前值）</td> <td>当前实际值 最大值，比如检查最近3分钟数据，3分钟数据会有3个value，是表示<font color="#FF4500">（&gt;=N）</font>个值都必须同时<font color="#FF4500">&gt;=</font>设定值</td></tr> <tr><td>MinVal	最小值（当前值）</td> <td>当前实际值 最小值，比如检查最近3分钟数据，3分钟数据会有3个value，是表示<font color="#FF4500">（&gt;=N）</font>个值都必须同时比<font color="#FF4500">&lt;=</font>设定值</td></tr> <tr><td>FluAscPer 波动上升百分比（当前值）</td> <td>波动百分比最大值。即当前最后<font color="#FF4500">（N）</font>分钟值比监控周期内其它分钟值<font color="#FF4500">（M-N个）</font>的增加百分比都&gt;=设定的百分比时触发警报,比如检查最近10分钟数据，触发个数为3；10分钟内数据会算出7个百分比数据，是表示最后3分钟值分别相比前面7分钟值，3组7次比较的上升波动百分比<font color="#FF4500">全部&gt;=</font>配置阈值。比如下降50%，阈值填写50。</td></tr> <tr><td>FluDescPer 波动下降百分比（当前值）</td> <td>波动百分比最小值。当前最后<font color="#FF4500">（N）</font>分钟值比监控周期内其它<font color="#FF4500">（M-N个）</font>分钟值的减少百分比都大于设定的百分比时触发警报，比如检查最近10分钟数据，触发个数为3；10分钟数据会算出7个百分比数据，是表示最后3分钟值分别相比前面7分钟值，3组7次比较的下降波动百分比<font color="#FF4500">全部&gt;=</font>配置阈值。比如下降50%，阈值填写50。</td></tr> <tr><td>SumMaxVal 总和最大值（当前值）</td> <td>当前值总和最大值，比如检查最近3分钟数据，表示3分钟内的总和<font color="#FF4500">&gt;=</font>设定值就告警。</td></tr> <tr><td>SumMinVal 总和最小值（当前值）</td> <td>当前值总和最小值，比如检查最近3分钟数据，表示3分钟内的总和<font color="#FF4500">&lt;=</font>设定值就告警。</td></tr></tbody></table> <p>点击&quot;如何使用?&quot;按钮，将会出现信息介绍设置规则的流程</p> <h2 id="具体告警配置"><a href="#具体告警配置" class="header-anchor">#</a> 具体告警配置</h2> <h3 id="transaction告警"><a href="#transaction告警" class="header-anchor">#</a> Transaction告警</h3> <p>对Transaction的告警，支持的指标有次数、延时、失败率；监控周期：一分钟</p> <h4 id="配置图示"><a href="#配置图示" class="header-anchor">#</a> 配置图示</h4> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/transaction_alert.png" alt=""></p> <h4 id="配置说明-4"><a href="#配置说明-4" class="header-anchor">#</a> 配置说明：</h4> <ul><li>项目名：要监控的项目名</li> <li>type：被监控transaction的type</li> <li>name：被监控transaction的name；如果为All，代表全部name</li> <li>监控指标：次数、延时、失败率</li> <li>告警规则：详情见<strong>告警规则</strong>部分</li></ul> <h3 id="event告警"><a href="#event告警" class="header-anchor">#</a> Event告警</h3> <p>对Event的个数进行告警；监控周期：一分钟</p> <h4 id="配置图示-2"><a href="#配置图示-2" class="header-anchor">#</a> 配置图示</h4> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/event_alert.png" alt=""></p> <h4 id="配置说明-5"><a href="#配置说明-5" class="header-anchor">#</a> 配置说明：</h4> <ul><li>项目名：要监控的项目名</li> <li>type：被监控event的type</li> <li>name：被监控event的name；如果为All，代表全部name</li> <li>告警规则：详情见<strong>告警规则</strong>部分</li></ul> <h3 id="心跳告警"><a href="#心跳告警" class="header-anchor">#</a> 心跳告警</h3> <p>心跳告警是对服务器当前状态的监控，如监控系统负载、GC数量等信息；监控周期：一分钟</p> <h4 id="配置图示-3"><a href="#配置图示-3" class="header-anchor">#</a> 配置图示</h4> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/heartbeat_alert.png" alt=""></p> <h4 id="配置说明-6"><a href="#配置说明-6" class="header-anchor">#</a> 配置说明：</h4> <ul><li>项目名：要监控的项目名</li> <li>指标：被监控的心跳指标名称；心跳告警是由两级匹配的：首先匹配项目，然后按照指标匹配</li> <li>告警规则：详情见<strong>告警规则</strong>部分</li></ul> <h4 id="异常告警"><a href="#异常告警" class="header-anchor">#</a> 异常告警</h4> <p>对异常的个数进行告警；监控周期：一分钟</p> <h4 id="配置图示-4"><a href="#配置图示-4" class="header-anchor">#</a> 配置图示</h4> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/problem_alert.png" alt=""></p> <h4 id="配置说明-7"><a href="#配置说明-7" class="header-anchor">#</a> 配置说明：</h4> <ul><li>项目名：要监控的项目名</li> <li>异常名称：被监控异常名称；当设置为“Total”时，是针对当前项目组所有异常总数阈值进行设置；当设置为特定异常名称时，针对当前项目组所有同名的异常阈值进行设定</li> <li>warning阈值：到达该阈值，发送warning级别告警；当异常数小于该阈值时，不做任何警报</li> <li>error阈值：到达该阈值，发送error级别告警</li> <li>总数大于Warning阈值，小于Error阈值，进行Warning级别告警；大于Error阈值，进行Error级别告警</li></ul> <h3 id="异常过滤"><a href="#异常过滤" class="header-anchor">#</a> 异常过滤：</h3> <p>对于不想进行异常告警的异常，可以在异常过滤配置里进行设置。</p> <ul><li>域名：	项目组名称，当设置为“Default”时，适用于所有项目组。</li> <li>异常名称：	异常名称，当设置为特定异常名称时，过滤当前项目组所有同名的异常</li></ul> <h3 id="业务指标告警"><a href="#业务指标告警" class="header-anchor">#</a> 业务指标告警</h3> <p>对Business业务指标进行告警；监控周期：一分钟</p> <h4 id="入口"><a href="#入口" class="header-anchor">#</a> 入口</h4> <p>项目监控配置 -&gt; 输入项目名并搜索 -&gt; 具体指标列的&quot;告警&quot;按钮</p> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/business_alarm_list.png" alt=""></p> <h4 id="配置图示-5"><a href="#配置图示-5" class="header-anchor">#</a> 配置图示</h4> <p><img src="https://raw.githubusercontent.com/wiki/dianping/cat/resources/config/business_alarm_edit.png" alt=""></p> <h4 id="配置说明-8"><a href="#配置说明-8" class="header-anchor">#</a> 配置说明：</h4> <ul><li>项目名：不需配置项目名，已从项目业务指标列表页面跳转，附带项目名信息</li> <li>监控指标：支持对指标的count、sum、avg三种统计值进行告警</li> <li>告警规则：详情见<strong>告警规则</strong>部分</li></ul> <h3 id="基线告警"><a href="#基线告警" class="header-anchor">#</a> 基线告警：</h3> <p>告警规则有四种基线告警类型：</p> <ul><li>下降值(比基线)</li> <li>下降百分比(比基线)</li> <li>上升值(比基线)</li> <li>上升百分比(比基线)</li></ul> <p>基线是由最近四周、相同周几的数据加权求和平均计算得出，可以反应历史情况。</p> <p>配置基线告警之后，Business报表才会展示基线趋势图。</p> <p>基线相关配置，请参考：<a href="/CatCookbook/zh/guide/config/business.html">业务指标配置</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/slankka/CatCookbook/edit/main/docs/zh/guide/config/alarm.md" target="_blank" rel="noopener noreferrer">帮助我改进页面!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/6/2021, 11:30:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/CatCookbook/zh/guide/config/project.html" class="prev">
        项目配置
      </a></span> <span class="next"><a href="/CatCookbook/zh/guide/config/global.html">
        全局系统配置
      </a>
      →
    </span></p></div> <footer class="footer" data-v-09d3003c>
      Site made by © 2021 😀 <a href="https://slankka.com" data-v-09d3003c>slankka</a></footer></main></div><div class="global-ui"></div></div>
    <script src="/CatCookbook/assets/js/app.7834a841.js" defer></script><script src="/CatCookbook/assets/js/3.c2b5e94d.js" defer></script><script src="/CatCookbook/assets/js/2.3be89db0.js" defer></script><script src="/CatCookbook/assets/js/19.4c7d11c5.js" defer></script>
  </body>
</html>
